<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ultimate Love Challenge</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-red: #ec4899; /* Pink-500 */
            --light-pink: #fbcfe8; /* Pink-200 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fce7f3; /* Pink-100 */
            min-height: 100vh;
            /* Ensure alignment for the initial screen only */
            display: flex;
            justify-content: center;
            align-items: center;
            /* Allow vertical scroll for the challenge screen */
            overflow-x: hidden;
            padding: 0; /* Reset body padding for responsiveness */
        }
        /* Custom styles for the running heart button */
        #running-heart-btn {
            position: absolute;
            transition: transform 0.4s ease-in-out; /* Smooth transition */
            cursor: pointer;
            z-index: 10;
        }

        /* Custom styles for the slow-moving snail */
        @keyframes moveSnail {
            0% { transform: translateX(-100%); }
            /* Adjusted to account for the full width minus the emoji size, ensuring it goes off-screen */
            100% { transform: translateX(calc(100% + 400px)); }
        }

        .snail-animation {
            /* 30 seconds to cross the screen, infinite loop, back and forth */
            animation: moveSnail 30s linear infinite alternate;
            position: absolute; /* Needed for animation keyframes */
        }

        /* Styling for the main content card */
        .challenge-card {
            background-color: white;
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px rgba(236, 72, 153, 0.3); /* Pink shadow */
            max-width: 900px;
            width: 95%; /* Better mobile fit */
            margin: 2rem auto;
            align-self: flex-start; /* For when body is display: flex */
        }

        /* Lock icon styling */
        .lock-icon {
            font-size: 2rem;
        }

        /* Responsive body adjustment when challenge screen is shown */
        body.challenge-mode {
            display: block;
            padding: 1rem;
        }
    </style>
</head>
<body>

    <!-- Initial Screen: The Running Heart -->
    <div id="initialScreen" class="w-full h-screen flex justify-center items-center relative">
        <button id="running-heart-btn"
            class="p-6 rounded-full text-7xl bg-white shadow-xl hover:shadow-2xl active:scale-95 transition-all duration-300"
            onclick="handleInitialClick()">
            ‚ù§Ô∏è
        </button>
        <p id="attempt-message" class="absolute bottom-10 text-xl font-semibold text-gray-700">
            Try to catch the heart! (It takes a few tries...)
        </p>
    </div>

    <!-- Challenge Screen: The 4 Parts (Initially Hidden) -->
    <div id="challengeScreen" class="hidden challenge-card">
        <h1 class="text-4xl font-bold text-center mb-10 text-pink-600">üíñ The Ultimate True Love Challenge üíñ</h1>

        <!-- Part 1: True Love Challenge -->
        <div id="part1" class="border-b-2 border-pink-200 pb-8 mb-8">
            <h2 class="text-3xl font-semibold mb-4 text-pink-700">1. True Love Challenge</h2>
            <div id="part1-content">
                <p class="text-lg mb-4 text-gray-700">
                    Question: "How many times do I love you? (Between 0 and 1000)"
                </p>
                <input type="number" id="love-count-input" placeholder="Enter a number..."
                    class="p-3 border-2 border-pink-300 rounded-lg w-full md:w-1/3 focus:ring-pink-500 focus:border-pink-500 transition duration-150">
                <button onclick="checkPart1()"
                    class="mt-4 md:mt-0 md:ml-4 bg-pink-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-pink-600 transition-all duration-200 shadow-md active:scale-95">
                    Check Answer
                </button>
                <div class="mt-4 flex items-center">
                    <span id="part1-lock" class="lock-icon">üîí</span>
                    <span id="part1-status" class="ml-3 text-red-500 font-medium">Locked</span>
                </div>
            </div>

            <!-- Success Content for Part 1 -->
            <div id="part1-success" class="hidden mt-6 p-4 bg-green-100 border-l-4 border-green-500 rounded-lg">
                <div class="flex flex-col items-center space-y-4">
                    <img src="images/2222.png"
                         alt="Love Icon Placeholder"
                         class="rounded-lg shadow-lg">
                    <p class="text-xl font-bold text-green-700">Lock Unlocked! üíï</p>
                    <p class="text-lg text-center text-gray-800">
                        I love you, I love you, because you are the most unique and unique gift that God has given to me and us among the 101 gifts.
                    </p>
                </div>
            </div>
        </div>

        <!-- Part 2: Heart Challenge -->
        <div id="part2" class="border-b-2 border-pink-200 pb-8 mb-8">
            <h2 class="text-3xl font-semibold mb-4 text-pink-700">2. Heart Challenge</h2>
            <div id="part2-content">
                <p class="text-lg mb-4 text-gray-700">
                    ‚ÄúClick the heart as many times as the letters in the phrase ‚ÄúI love you‚Äù üíñ‚Äù
                </p>
                <div class="flex items-center space-x-4">
                    <button id="part2-heart-btn" onclick="handlePart2Click()"
                        class="p-4 rounded-full text-4xl bg-white shadow-lg hover:shadow-xl hover:scale-105 active:scale-95 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
                        disabled>
                        <span id="part2-icon">‚ùå</span>
                    </button>
                    <p class="text-2xl font-bold text-gray-800">
                        Clicks: <span id="part2-click-count" class="text-pink-600">0</span> / 9
                    </p>
                </div>
                <div class="mt-4 flex items-center">
                    <span id="part2-lock" class="lock-icon">üîí</span>
                    <span id="part2-status" class="ml-3 text-red-500 font-medium">Locked (Needs Part 1 success)</span>
                </div>
            </div>

            <!-- Success Content for Part 2 -->
            <div id="part2-success" class="hidden mt-6 p-4 bg-yellow-100 border-l-4 border-yellow-500 rounded-lg">
                <p class="text-xl font-bold text-yellow-700 mb-2">Unlocked!</p>
                <p class="text-lg text-gray-800">
                    Now that you have made my heart beat 9 times, it is time for you to know... I love you much more than those 9 letters, pakhpakhpakhpakh.
                </p>
            </div>
        </div>

        <!-- Part 3: Wish Challenge -->
        <div id="part3" class="border-b-2 border-pink-200 pb-8 mb-8">
            <h2 class="text-3xl font-semibold mb-4 text-pink-700">3. Wish Challenge</h2>

            <form id="wish-form" onsubmit="handlePart3Submit(event)">
                <p class="text-lg mb-4 text-gray-700">
                    ‚ÄúWrite your wish here ‚ú®‚Äù
                </p>
                <textarea id="wish-input" rows="3" placeholder="Enter your beautiful wish..."
                    class="p-3 border-2 border-pink-300 rounded-lg w-full focus:ring-pink-500 focus:border-pink-500 transition duration-150 mb-4" required
                    disabled></textarea>

                <button type="submit" id="wish-submit-btn"
                    class="bg-pink-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-pink-600 transition-all duration-200 shadow-md active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
                    disabled>
                    Send Wish
                </button>
                <div class="mt-4 flex items-center">
                    <span id="part3-lock" class="lock-icon">üîí</span>
                    <span id="part3-status" class="ml-3 text-red-500 font-medium">Locked (Needs Part 2 success)</span>
                </div>
            </form>

            <!-- Success Content for Part 3 (Snail Animation) -->
            <div id="part3-success" class="hidden mt-6 p-4 bg-purple-100 border-l-4 border-purple-500 rounded-lg">
                <div class="flex flex-col space-y-6">
                    <!-- Increased height for clearer animation -->
                    <div class="w-full h-20 overflow-hidden relative">
                        <!-- Snail Emoji with heart on shell moving -->
                        <span class="text-4xl snail-animation">üê¢‚ù§Ô∏è</span>
                    </div>
                    <p class="text-xl text-center font-bold text-purple-700">
                        Your wish is being sent to the universe by the fastest courier of hearts.
                    </p>
                </div>
            </div>
        </div>

        <!-- Part 4: Birthday Cake Challenge (New Section) -->
        <div id="part4" class="pt-8">
            <h2 class="text-3xl font-semibold mb-4 text-pink-700">4. Birthday Cake Surprise</h2>
            <div id="part4-content">
                <p class="text-lg mb-4 text-gray-700">
                    Click the cake to reveal a special message from your favorite 21-year-old! üéÇ
                </p>
                <div class="flex items-center space-x-4">
                    <button id="part4-cake-btn" onclick="handlePart4Click()"
                        class="p-4 rounded-full text-4xl bg-white shadow-lg hover:shadow-xl hover:scale-105 active:scale-95 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
                        disabled>
                        <span id="part4-icon">‚ùå</span>
                    </button>
                    <p class="text-xl font-bold text-gray-800">
                        Status: <span id="part4-state" class="text-red-500">Locked</span>
                    </p>
                </div>
                <div class="mt-4 flex items-center">
                    <span id="part4-lock" class="lock-icon">üîí</span>
                    <span id="part4-status" class="ml-3 text-red-500 font-medium">Locked (Needs Part 3 success)</span>
                </div>
            </div>

            <!-- Success Content for Part 4 (The Letter) -->
            <div id="part4-success" class="hidden mt-6 p-6 bg-pink-100 border-l-4 border-pink-500 rounded-lg">
                <div class="flex flex-col items-center space-y-4">
                    <h3 class="text-3xl font-bold text-pink-700 mb-4 text-center">Mom Nezi Nezi, You are the Best!</h3>
                    <!-- Placeholder for 1111.png -->
                    <img src="images/1111.png"
                         alt="Placeholder for 1111.png"
                         class="rounded-xl shadow-lg border-4 border-pink-300">

                    <!-- Letter content will be injected here -->
                    <p id="birthday-letter-content" class="text-base text-gray-800 whitespace-pre-line leading-relaxed text-left w-full">
                        <!-- Content will be inserted by JS -->
                    </p>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Global State
        let attempts = 0;
        let part2Clicks = 0;
        const MAX_ATTEMPTS = 5;
        const TARGET_CLICKS = 9;
        const TARGET_LOVE_COUNT = 1;

        // Elements
        const initialScreen = document.getElementById('initialScreen');
        const challengeScreen = document.getElementById('challengeScreen');
        const runningHeartBtn = document.getElementById('running-heart-btn');
        const attemptMessage = document.getElementById('attempt-message');

        // Part 1 Elements
        const part1Input = document.getElementById('love-count-input');
        const part1Lock = document.getElementById('part1-lock');
        const part1Status = document.getElementById('part1-status');
        const part1Success = document.getElementById('part1-success');

        // Part 2 Elements
        const part2HeartBtn = document.getElementById('part2-heart-btn');
        const part2Icon = document.getElementById('part2-icon');
        const part2ClickCount = document.getElementById('part2-click-count');
        const part2Lock = document.getElementById('part2-lock');
        const part2Status = document.getElementById('part2-status');
        const part2Success = document.getElementById('part2-success');

        // Part 3 Elements
        const wishForm = document.getElementById('wish-form');
        const wishInput = document.getElementById('wish-input');
        const wishSubmitBtn = document.getElementById('wish-submit-btn');
        const part3Lock = document.getElementById('part3-lock');
        const part3Status = document.getElementById('part3-status');
        const part3Success = document.getElementById('part3-success');

        // Part 4 Elements (NEW)
        const part4CakeBtn = document.getElementById('part4-cake-btn');
        const part4Icon = document.getElementById('part4-icon');
        const part4State = document.getElementById('part4-state');
        const part4Lock = document.getElementById('part4-lock');
        const part4Status = document.getElementById('part4-status');
        const part4Success = document.getElementById('part4-success');
        const part4LetterContainer = document.getElementById('birthday-letter-content');


        // --- UTILITY FUNCTIONS ---

        // Function to show a temporary message instead of alert()
        function showMessage(message, type = 'info') {
            const tempDiv = document.createElement('div');
            let bgColor = 'bg-blue-500';
            if (type === 'error') bgColor = 'bg-red-500';
            if (type === 'success') bgColor = 'bg-green-500';

            tempDiv.className = `fixed top-5 left-1/2 -translate-x-1/2 p-4 rounded-lg text-white font-bold shadow-2xl z-50 transition-all duration-300 ${bgColor}`;
            tempDiv.textContent = message;

            document.body.appendChild(tempDiv);
            setTimeout(() => {
                tempDiv.classList.add('opacity-0');
                setTimeout(() => tempDiv.remove(), 300);
            }, 3000);
        }

        // --- INITIAL SCREEN LOGIC (Running Heart) ---

        function moveHeart() {
            // Get screen bounds for random positioning
            const screenWidth = window.innerWidth;
            const screenHeight = window.innerHeight;
            const btnSize = runningHeartBtn.offsetWidth;

            // Generate random positions within the visible area
            const newX = Math.random() * (screenWidth - btnSize * 1.5) + (btnSize * 0.25);
            const newY = Math.random() * (screenHeight - btnSize * 1.5) + (btnSize * 0.25);

            // Apply the new position using translation (better for performance)
            // We use clientWidth/Height for offset from center
            runningHeartBtn.style.transform = `translate(${newX - screenWidth / 2 + btnSize / 2}px, ${newY - screenHeight / 2 + btnSize / 2}px) scale(1)`;

            // Vague message, no click count revealed
            attemptMessage.textContent = `It runs away! Try to catch the heart!`;
        }

        function handleInitialClick() {
            if (attempts < MAX_ATTEMPTS - 1) { // -1 because the last click is the successful one
                attempts++;
                moveHeart();
            } else {
                // Heart is now clickable!
                runningHeartBtn.style.position = 'static'; // Reset position
                runningHeartBtn.classList.add('hidden'); // Hide the heart
                initialScreen.classList.add('hidden'); // Hide the initial screen
                challengeScreen.classList.remove('hidden'); // Show the challenge screen
                document.body.classList.remove('flex', 'justify-center', 'items-center');
                document.body.classList.add('challenge-mode'); // Switch body to responsive mode
            }
        }

        // --- PART 1 LOGIC (Number 1) ---

        function checkPart1() {
            // Use parseInt for number comparison, but keep input value as string to be safe
            const inputValue = parseInt(part1Input.value.trim(), 10);

            if (inputValue === TARGET_LOVE_COUNT) {
                // Success
                part1Lock.textContent = 'üîì';
                part1Status.textContent = 'Unlocked!';
                part1Status.classList.remove('text-red-500');
                part1Status.classList.add('text-green-600');
                part1Input.disabled = true;
                part1Input.nextElementSibling.disabled = true; // Disable the button
                part1Input.classList.remove('border-pink-300');
                part1Input.classList.add('border-green-500', 'bg-green-50');
                part1Success.classList.remove('hidden');

                // Unlock Part 2
                unlockPart2();
                showMessage('Challenge 1 Complete!', 'success');

            } else {
                // Failure
                showMessage('Try again! The universe knows the correct number of times...', 'error');
                part1Input.value = ''; // Clear input for next attempt
            }
        }

        function unlockPart2() {
            part2HeartBtn.disabled = false;
            part2Icon.textContent = 'üíñ';
            part2Lock.textContent = 'üîì';
            part2Status.textContent = 'Unlocked! Start clicking!';
            part2Status.classList.remove('text-red-500');
            part2Status.classList.add('text-green-600');
        }

        // --- PART 2 LOGIC (9 Clicks) ---

        function handlePart2Click() {
            if (part2Clicks < TARGET_CLICKS) {
                part2Clicks++;
                part2ClickCount.textContent = part2Clicks;
                part2HeartBtn.classList.add('scale-110');
                setTimeout(() => part2HeartBtn.classList.remove('scale-110'), 100);

                if (part2Clicks === TARGET_CLICKS) {
                    // Success
                    part2HeartBtn.disabled = true;
                    part2Icon.textContent = '‚úÖ';
                    part2Lock.textContent = 'üîì';
                    part2Status.textContent = 'Complete!';
                    part2Status.classList.remove('text-green-600');
                    part2Status.classList.add('text-yellow-600');
                    part2Success.classList.remove('hidden');

                    // Unlock Part 3
                    unlockPart3();
                    showMessage('Challenge 2 Complete!', 'success');
                }
            }
        }

        // --- PART 3 LOGIC (Wish and Snail) ---

        function unlockPart3() {
            wishInput.disabled = false;
            wishSubmitBtn.disabled = false;
            part3Lock.textContent = 'üîì';
            part3Status.textContent = 'Unlocked! Write your wish!';
            part3Status.classList.remove('text-red-500');
            part3Status.classList.add('text-green-600');
            wishInput.classList.add('bg-yellow-50');
        }

        function handlePart3Submit(event) {
            event.preventDefault(); // Stop form submission
            if (wishInput.disabled) return;

            const wish = wishInput.value.trim();

            if (wish) {
                // Hide the form elements
                wishForm.classList.add('hidden');

                // Show the success/animation area
                part3Success.classList.remove('hidden');

                // Unlock Part 4
                unlockPart4();
                showMessage('Your wish is on its way!', 'info');

            } else {
                showMessage('Please write a wish before sending!', 'error');
            }
        }

        // --- PART 4 LOGIC (Cake and Letter) ---

        function unlockPart4() {
            part4CakeBtn.disabled = false;
            part4Icon.textContent = 'üéÇ';
            part4Lock.textContent = 'üîì';
            part4Status.textContent = 'Unlocked! Get ready!';
            part4Status.classList.remove('text-red-500');
            part4Status.classList.add('text-green-600');
            part4State.textContent = 'Ready!';
            part4State.classList.remove('text-red-500');
            part4State.classList.add('text-green-600');
        }

        function handlePart4Click() {
            part4Success.classList.remove('hidden');
            part4CakeBtn.disabled = true;
            part4Icon.textContent = 'üéÅ';
            showMessage('Happy Birthday!', 'success');
        }


        // Long letter content for Part 4
        const birthdayLetter = `How grateful I am to God that you have become a part of me. That means your genes are in my body, your gametes are in my body üòÑ

Then, for example, someone compliments me and says, "How beautiful you are," and I show you a picture and say, "I went to my mom!" üòå

It's not right to compare, but when I put you next to others, as a human being, a mother, a daughter, and a wife, you are the most perfect;
Someone who, with kindness and that unshakable heart, always finds the best ways and shows them to others.

A companion for her daughter who listens in every situation without judgment,
And that makes talking to her a hundred times more pleasant and beautiful.

A wife who has been there and supported her in every stage of life since the age of 17,
And a curly black-haired girl who has always been and is the confidant of her parents and sisters.

So good that I want to hug you tightly and say:
"Mom Nezi Nezi, you are really good üò≠ You really were and are the best in your life!"

If you ever feel that life is meaningless or boring,
think that you are my hope, my goal.
Without you, the sea is not happy.
That tea floss and your support in every situation only make sense with you.

It is with you that the weather, autumn leaves, trees and crows find meaning;
Otherwise they are just a simple tree and a crow.

It is with you that even shopping at a repetitive store is fun.

I love you very much, very much.
As I write this tonight,
as much as all the yellow and green and orange leaves on the trees,
the ones just falling, or lying on the ground,
I love you üíõ

Happy birthday my best,
Happy and blessed birthday üíê
May the best good times of life be yours ‚ù§Ô∏è
`;


        // --- INITIALIZATION ---

        window.onload = () => {
             // Initial random positioning for the running heart
             moveHeart();
             
             // Inject letter content for Part 4
             if (part4LetterContainer) {
                 part4LetterContainer.textContent = birthdayLetter;
             }
        };

        // Ensure the heart resets to an initial random position if screen size changes
        window.addEventListener('resize', () => {
            if (!challengeScreen.classList.contains('hidden')) {
                // If the challenge screen is showing, do nothing with the heart position
                return;
            }
            // If the initial screen is showing, reposition the heart
            moveHeart();
        });

    </script>
</body>
</html>